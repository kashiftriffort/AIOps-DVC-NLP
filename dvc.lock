schema: '2.0'
stages:
  stage_name:
    cmd: python src/stage_01_get_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: f7e7fc4774b1ad8d7b8d82ca0f8a69f7
      size: 420
    - path: src/stage_01_get_data.py
      md5: 2a10b96ca84ecb3b6a180f5db5be5d7b
      size: 1275
    - path: src/utils/common.py
      md5: d162961d817182441383bdb0e674e685
      size: 675
  get_data:
    cmd: python src/stage_01_get_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: 35b13ade19ed25aee96e4ba82b1a7cb4
      size: 425
    - path: src/stage_01_get_data.py
      md5: 54656ae996ee0ec5f72da1ad2949dc8f
      size: 1348
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    outs:
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
  prepare_data:
    cmd: python src/stage_02_prepare.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: 35b13ade19ed25aee96e4ba82b1a7cb4
      size: 425
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
    - path: src/stage_02_prepare.py
      md5: 807141a1e346cea26d260f9120bb0202
      size: 2160
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    - path: src/utils/data_mgmt.py
      md5: 0cfcb66d3adef8739f6ea7457665a177
      size: 838
    params:
      params.yaml:
        prepare.seed: 42
        prepare.split: 0.3
    outs:
    - path: artifacts/prepared/test.tsv
      md5: ac577403d970be6cbe986f19e1ea56ca
      size: 7136988
    - path: artifacts/prepared/train.tsv
      md5: a782fc2e37219d7468d20a15d9f74e91
      size: 16724331
  featurize:
    cmd: python src/stage_03_featurization.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/prepared/test.tsv
      md5: ac577403d970be6cbe986f19e1ea56ca
      size: 7136988
    - path: artifacts/prepared/train.tsv
      md5: a782fc2e37219d7468d20a15d9f74e91
      size: 16724331
    - path: configs/config.yaml
      md5: 35b13ade19ed25aee96e4ba82b1a7cb4
      size: 425
    - path: src/stage_03_featurization.py
      md5: 939bbbb6afea84778c9bbfb908b32c2c
      size: 3068
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    - path: src/utils/featurize.py
      md5: 66b4dbacce884cdbb3d70a692f8ec8fb
      size: 491
    params:
      params.yaml:
        featurize.max_features: 3000
        featurize.ngram_range: 2
    outs:
    - path: artifacts/features/test.pkl
      md5: 37cd57d353e567722144346d241102a3
      size: 3802595
    - path: artifacts/features/train.pkl
      md5: d8595a8d1a9bec46c2667f9f54996812
      size: 8931931
  train:
    cmd: python src/stage_04_train.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/features/train.pkl
      md5: d8595a8d1a9bec46c2667f9f54996812
      size: 8931931
    - path: configs/config.yaml
      md5: 35b13ade19ed25aee96e4ba82b1a7cb4
      size: 425
    - path: src/stage_04_train.py
      md5: 15aadaa6626f05b2e04ab21ea5cb2160
      size: 2378
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    params:
      params.yaml:
        train.min_split: 15
        train.n_estimators: 100
        train.seed: 42
    outs:
    - path: artifacts/model/model.pkl
      md5: 40155be878b5ed02caa860edb1bcc2a5
      size: 3176752
