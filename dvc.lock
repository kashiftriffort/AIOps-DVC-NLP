schema: '2.0'
stages:
  stage_name:
    cmd: python src/stage_01_get_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: f7e7fc4774b1ad8d7b8d82ca0f8a69f7
      size: 420
    - path: src/stage_01_get_data.py
      md5: 2a10b96ca84ecb3b6a180f5db5be5d7b
      size: 1275
    - path: src/utils/common.py
      md5: d162961d817182441383bdb0e674e685
      size: 675
  get_data:
    cmd: python src/stage_01_get_data.py --config=configs/config.yaml
    deps:
    - path: configs/config.yaml
      md5: 18c73323b7ad53d8414655a170fc7ca1
      size: 497
    - path: src/stage_01_get_data.py
      md5: 54656ae996ee0ec5f72da1ad2949dc8f
      size: 1348
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    outs:
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
  prepare_data:
    cmd: python src/stage_02_prepare.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: configs/config.yaml
      md5: 18c73323b7ad53d8414655a170fc7ca1
      size: 497
    - path: data/data.xml
      md5: a304afb96060aad90176268345e10355
      size: 37891850
    - path: src/stage_02_prepare.py
      md5: 807141a1e346cea26d260f9120bb0202
      size: 2160
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    - path: src/utils/data_mgmt.py
      md5: 0cfcb66d3adef8739f6ea7457665a177
      size: 838
    params:
      params.yaml:
        prepare.seed: 2021
        prepare.split: 0.2
    outs:
    - path: artifacts/prepared/test.tsv
      md5: 60c757f3b30604473de7fa775dfc00d9
      size: 4894699
    - path: artifacts/prepared/train.tsv
      md5: 553034c4cf40efc63c99c19fe98610d0
      size: 18966620
  featurize:
    cmd: python src/stage_03_featurization.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/prepared/test.tsv
      md5: 60c757f3b30604473de7fa775dfc00d9
      size: 4894699
    - path: artifacts/prepared/train.tsv
      md5: 553034c4cf40efc63c99c19fe98610d0
      size: 18966620
    - path: configs/config.yaml
      md5: 18c73323b7ad53d8414655a170fc7ca1
      size: 497
    - path: src/stage_03_featurization.py
      md5: 939bbbb6afea84778c9bbfb908b32c2c
      size: 3068
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    - path: src/utils/featurize.py
      md5: 66b4dbacce884cdbb3d70a692f8ec8fb
      size: 491
    params:
      params.yaml:
        featurize.max_features: 2500
        featurize.ngram_range: 3
    outs:
    - path: artifacts/features/test.pkl
      md5: 5c764778c31aa301497b7ad1ecef0555
      size: 2630555
    - path: artifacts/features/train.pkl
      md5: 950005d878c5375fe141efe266aec291
      size: 10246491
  train:
    cmd: python src/stage_04_train.py --config=configs/config.yaml --params=params.yaml
    deps:
    - path: artifacts/features/train.pkl
      md5: 950005d878c5375fe141efe266aec291
      size: 10246491
    - path: configs/config.yaml
      md5: 18c73323b7ad53d8414655a170fc7ca1
      size: 497
    - path: src/stage_04_train.py
      md5: 15aadaa6626f05b2e04ab21ea5cb2160
      size: 2378
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    params:
      params.yaml:
        train.min_split: 32
        train.n_estimators: 110
        train.seed: 2021
    outs:
    - path: artifacts/model/model.pkl
      md5: 1ea63829d0e609a19b053168a4a1cf9d
      size: 3193088
  evaluate:
    cmd: python src/stage_05_evaluate.py --config=configs/config.yaml
    deps:
    - path: artifacts/features/test.pkl
      md5: 5c764778c31aa301497b7ad1ecef0555
      size: 2630555
    - path: artifacts/model/model.pkl
      md5: 1ea63829d0e609a19b053168a4a1cf9d
      size: 3193088
    - path: configs/config.yaml
      md5: 18c73323b7ad53d8414655a170fc7ca1
      size: 497
    - path: src/stage_05_evaluate.py
      md5: 235ccc83683aca0a4992c8ebc516aa6b
      size: 2818
    - path: src/utils/common.py
      md5: db34268576c06107db679700ef2e114c
      size: 1039
    outs:
    - path: prc.json
      md5: 73394a0f494871a1fa78933d5314b48a
      size: 120993
    - path: roc.json
      md5: bc653742d9da31b1c05f99d533d4ad65
      size: 65178
    - path: scores.json
      md5: 67a5ab5142e285735e4769d6ba117c4a
      size: 73
